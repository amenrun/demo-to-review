<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Document</title>
    <meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=0">
    <link rel="stylesheet" href="https://res.wx.qq.com/open/libs/weui/1.1.0/weui.min.css">
    <link rel="stylesheet" href="index.css">
</head>
<body>
    <div class="weui-tab">
        <div class="weui-tab__panel">
            <!-- 内容 begin -->
            <div class="panel">
                <div class="panel-container">
                    <div id="panel-book" class="panel-book">订场</div>
                    <div id="panel-activity" class="panel-activity">活动</div>
                    <div id="panel-personalInfo" class="panel-personalInfo">我</div>
                </div>
            </div>
            <!-- 内容 end -->
        </div>
        <!-- 底部菜单 begin -->
        <div class="weui-tabbar">
            <a href="javascript:;" class="weui-tabbar__item">
                <img src="images/icon_book.png" alt="" class="weui-tabbar__icon weui-bar__item_on">
                <p class="weui-tabbar__label">订场</p>
            </a>
            <a href="javascript:;" class="weui-tabbar__item">
                <img src="images/icon_activity.png" alt="" class="weui-tabbar__icon">
                <p class="weui-tabbar__label">活动</p>
            </a>
            <a href="javascript:;" class="weui-tabbar__item">
                <img src="images/icon_personalInfo.png" alt="" class="weui-tabbar__icon">
                <p class="weui-tabbar__label">我</p>
            </a>
        </div>
        <!-- 底部菜单 end -->
    </div>

<script src="zepto-store.min.js"></script>
<script src="iscroll-probe.min.js"></script>
<script>

    ;(function(){
        // 页面初始化
        var panelWidth = $('.panel').width(),
            panelHeight = $('.panel').height();
        $('.panel div[id^="panel-"]').css('width',panelWidth).css('height',panelHeight);
        var scroll = new IScroll('.panel', {
            click: true, // 允许鼠标点击事件
            tap: true, // 允许触摸事件
            hScrollbar:false,vScrollbar:false,vScroll:false,snap:true,probeType:3,
            onBeforeScrollStart: function ( e ) {
                if ( this.absDistX > (this.absDistY + 5 ) ) {
                    e.preventDefault();
                }
            },
            //解决第一次无法滑动的问题
            onTouchEnd: function () {
                var self = this;
                if (self.touchEndTimeId) {
                   clearTimeout(self.touchEndTimeId);
                }
                self.touchEndTimeId = setTimeout(function () {
                    self.absDistX = 0;
                    self.absDistY = 0;
                }, 600);
            }
        });
        $('.weui-tabbar__item').eq(0).addClass('weui-bar__item_on').siblings().removeClass('weui-bar__item_on');
        // 在页面内点击底部菜单时，才需要触发的操作
        $('.weui-tabbar__item').each(function(index) {
            $(this).on('click', function () {
                // 改变高亮
                $(this).addClass('weui-bar__item_on').siblings().removeClass('weui-bar__item_on');
                // 显示对应内容
                switch(index) {
                    case 0:
                        console.log('book');

                        break;
                    case 1:
                        console.log('activity');

                        break;
                    case 2:
                        console.log('personalInfo');
                        
                        break;
                    // 不设置default操作
                }
            });
        });
    }());
</script>
</body>
</html>
